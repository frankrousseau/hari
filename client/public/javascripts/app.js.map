{"version":3,"file":"public/javascripts/app.js","sources":["app/application.coffee","app/collections/daily_notes.coffee","app/initialize.coffee","app/lib/app_helpers.coffee","app/lib/base_view.coffee","app/lib/db.coffee","app/lib/request.coffee","app/lib/view_collection.coffee","app/models/daily_note.coffee","app/router.coffee","app/views/app_view.coffee","app/views/daily_note.coffee","app/views/daily_note_widget.coffee","app/views/daily_notes.coffee","app/views/templates/daily_note.jade","app/views/templates/daily_note_widget.coffee","app/views/templates/daily_note_widget.jade","app/views/templates/home.jade"],"names":[],"mappings":"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","sourcesContent":["module.exports =\n\n    initialize: ->\n        # Routing management\n        Router = require 'router'\n        @router = new Router()\n        Backbone.history.start()\n\n        # Makes this object immuable.\n        Object.freeze this if typeof Object.freeze is 'function'\n","module.exports = class DailyNotesCollection extends Backbone.Collection\n    model: require '../models/daily_note'\n    pouch:\n        options:\n            query:\n                fun:\n                    map: (doc) ->\n                        emit doc.name, null if doc.docType is 'DailyNote'\n            changes:\n                include_docs: true\n                filter: (doc) ->\n                    doc._deleted or doc.docType is 'DailyNote'\n    parse: (result) ->\n        _.pluck(result.rows, 'doc').reverse()\n","app = require 'application'\ndb = require 'lib/db'\n\n# The function called from index.html\n$ ->\n    require 'lib/app_helpers'\n\n    db.initialize()\n    app.initialize()\n","(() ->\n    # IIFE to avoid collisions with other variables\n    (->\n        # Make it safe to do console.log() always.\n        console = window.console = window.console or {}\n        method = undefined\n        dummy = ->\n        methods = ('assert,count,debug,dir,dirxml,error,exception,\n                   group,groupCollapsed,groupEnd,info,log,markTimeline,\n                   profile,profileEnd,time,timeEnd,trace,warn').split ','\n\n        console[method] = console[method] or dummy while method = methods.pop()\n    )()\n)()\n","# Base component to build widgets.\nmodule.exports = class BaseView extends Backbone.View\n\n    template: ->\n\n    initialize: ->\n        @render()\n\n    getRenderData: ->\n        model: @model?.toJSON()\n\n    render: ->\n        @beforeRender()\n        @$el.html @template(@getRenderData())\n        @afterRender()\n        @\n\n    beforeRender: ->\n\n    afterRender: ->\n\n    destroy: ->\n        @undelegateEvents()\n        @$el.removeData().unbind()\n        @remove()\n        Backbone.View::remove.call @\n\n    showLoading: ->\n        @$('.spinner').show()\n\n    hideLoading: ->\n        @$('.spinner').hide()\n","DailyNote = require '../models/daily_note'\n\nmodule.exports = pouch =\n\n    db: new PouchDB 'db'\n\n\n    notes:\n\n        get: (day, callback) ->\n            pouch.db.get \"dailynote-#{day}\", (err, doc) ->\n                doc ?=\n                    _id: \"dailynote-#{day}\"\n                    docType: \"DailyNote\"\n                    date: day\n                    text: ''\n\n                callback err, new DailyNote doc\n\n\n        remove: (doc, callback) ->\n            pouch.db.remove doc.attributes, (err) ->\n                callback?()\n\n\n        save: (doc, callback) ->\n            pouch.db.get doc._id, (err, dbDoc) =>\n\n                if err and err.status isnt 404\n                    console.log 'An error occured with PouchDB:'\n                    console.log err\n\n                else\n                    doc._rev = dbDoc._rev if dbDoc?\n                    pouch.db.put doc, (err, doc) =>\n\n                        if err\n                            console.log 'An error occured with PouchDB:'\n                            console.log err\n\n                        else\n                            doc._rev = doc.rev\n\n                        callback?()\n\n\n    sync: (options) ->\n\n        syncOptions =\n            filter: (doc) -> doc.docType is 'DailyNote'\n\n        url = window.location.protocol + '//' + \\\n              window.location.host + '/db/cozy'\n\n        pouch.db.allDocs include_docs: true, (err, docs) ->\n            for doc in docs.rows\n                pouch.db.remove doc.doc unless doc.doc.date\n\n        pouch.db.sync url, syncOptions\n            .on 'complete', ->\n                setInterval ->\n                    sync = pouch.db.sync url, syncOptions\n                        .on 'change', options.onChange\n                        .on 'uptodate',  options.onUpToDate\n                        .on 'error',  options.onUpToDate\n                , 2000\n\n\n    initialize: ->\n        Backbone.sync = BackbonePouch.sync\n            db: @db\n            fetch: 'query'\n            options:\n                query:\n                    include_docs: true\n","# Make ajax request more easy to do.\n# Expected callbacks: success and error\nexports.request = (type, url, data, callback) ->\n    $.ajax\n        type: type\n        url: url\n        data: if data? then JSON.stringify data else null\n        contentType: \"application/json\"\n        dataType: \"json\"\n        success: (data) ->\n            callback null, data if callback?\n        error: (data) ->\n            if data? and data.msg? and callback?\n                callback new Error data.msg\n            else if callback?\n                callback new Error \"Server error occured\"\n\n# Sends a get request with data as body\n# Expected callbacks: success and error\nexports.get = (url, callback) ->\n    exports.request \"GET\", url, null, callback\n\n# Sends a post request with data as body\n# Expected callbacks: success and error\nexports.post = (url, data, callback) ->\n    exports.request \"POST\", url, data, callback\n\n# Sends a put request with data as body\n# Expected callbacks: success and error\nexports.put = (url, data, callback) ->\n    exports.request \"PUT\", url, data, callback\n\n# Sends a delete request with data as body\n# Expected callbacks: success and error\nexports.del = (url, callback) ->\n    exports.request \"DELETE\", url, null, callback\n","BaseView = require 'lib/base_view'\n\n\n# Base view widget to display/manage list of data.\nmodule.exports = class ViewCollection extends BaseView\n\n    itemview: null\n\n    views: {}\n\n    template: -> ''\n\n    itemViewOptions: ->\n\n    collectionEl: null\n\n    # add 'empty' class to view when there is no subview\n    onChange: ->\n        @$el.toggleClass 'empty', _.size(@views) is 0\n\n    # can be overriden if we want to place the subviews somewhere else\n    appendView: (view) ->\n        @$collectionEl.append view.el\n\n    # bind listeners to the collection\n    initialize: ->\n        if not @collectionEl?\n            collectionEl = @el\n\n        super\n        @views = {}\n        @listenTo @collection, \"reset\",   @onReset\n        @listenTo @collection, \"add\",     @addItem\n        @listenTo @collection, \"remove\",  @removeItem\n\n        @render()\n\n    # if we have views before a render call, we detach them\n    render: ->\n        view.$el.detach() for id, view of @views\n        super\n        @$collectionEl = $(@collectionEl)\n\n    renderAll: =>\n        @appendView view.$el for id, view of @views\n        @onReset @collection\n        @onChange @views\n\n    # after render, we reattach the views\n    afterRender: ->\n        @$collectionEl = $(@collectionEl)\n        @appendView view.$el for id, view of @views\n        @onReset @collection\n        @onChange @views\n\n    # destroy all sub views before remove\n    remove: ->\n        @onReset []\n        super\n\n    # event listener for reset\n    onReset: (newcollection) ->\n        view.remove() for id, view of @views\n        newcollection.forEach @addItem\n\n    # event listeners for add\n    addItem: (model) =>\n        options = _.extend {}, {model: model}, @itemViewOptions(model)\n        view = new @itemview(options)\n        @views[model.cid] = view.render()\n        @appendView view\n        @onChange @views\n\n    # event listeners for remove\n    removeItem: (model) =>\n        @views[model.cid].remove()\n        delete @views[model.cid]\n\n        @onChange @views\n","module.exports = class DailyNote extends Backbone.Model\n","AppView = require 'views/app_view'\n\n\nmodule.exports = class Router extends Backbone.Router\n\n\n    routes:\n        '': 'main'\n        'archives': 'archives'\n        ':date': 'note'\n\n\n    main: ->\n        @displayWidget 'dailyNote'\n\n\n    archives: ->\n        @displayWidget 'archives'\n\n\n    note: (date) ->\n        @displayWidget 'dailyNote', date\n\n\n    displayWidget: (view, id) ->\n        @mainView = new AppView() unless mainWidget?\n        @mainView.showWidget view, id\n\n","pouch = require '../lib/db'\n\nBaseView = require '../lib/base_view'\nDailyNote = require '../models/daily_note'\nDailyNotes = require './daily_notes'\nDailyNoteWidget = require './daily_note_widget'\n\n\n# Represents main view, the one that builds widgets and display them\n# depending on state given by the router.\n# Sets window listeners to adapte the UI when resize occurs and to save current\n# writing when the window is closed.\nmodule.exports = class AppView extends BaseView\n\n    el: 'body.application'\n    template: require('./templates/home')\n\n\n    getRenderData: ->\n        date: moment().format 'DD/MM/YYYY'\n\n\n    # After the main view is rendered, it builds the daily note widget\n    # that allows the user to write his note.\n    afterRender: ->\n        @widgets = $ '.widget'\n\n        @noteWidget = new DailyNoteWidget\n        $(window).resize @noteWidget.resizeTextArea\n        $(window).on 'unload', @noteWidget.saveNote\n\n        @archivesWidget = $ '#archives'\n        @notes = new DailyNotes\n\n        @setSync()\n\n\n    # Display given widget (note editor, note list...)\n    showWidget: (widget, id) ->\n        @widgets.hide()\n        @[widget] id if @[widget]?\n\n\n    # Load an display given note.\n    dailyNote: (day) ->\n        day ?= moment().format 'YYYY-MM-DD'\n        @noteWidget.show day\n\n\n    # Show archives widget.\n    archives: ->\n        @archivesWidget.show()\n\n\n    # Configure PouchDB synchronisation.\n    setSync: ->\n        pouch.sync\n            onChange: (info) =>\n                console.log \"change:\"\n                console.log info\n                if info.direction is 'pull' and info.change.docs_written > 0\n                    @noteWidget.show @noteWidget.model.get 'date'\n            onUpToDate: (info) ->\n                console.log \"uptodate:\"\n                console.log info\n            onError: (err) ->\n                console.log \"An error occured while synchronizing data:\"\n                console.log err\n\n","BaseView = require '../lib/base_view'\n\n# Represents a note displayed in the archive list.\nmodule.exports = class DailyNoteView extends BaseView\n    template: require './templates/daily_note'\n    className: 'daily-note'\n\n    # Set a max length for text attribute before rendering the line.\n    getRenderData: ->\n        data =\n            date: @model.get 'date'\n            text: @model.get 'text'\n\n        maxLength = 80\n        if data.text?.length > maxLength\n            data.text = \"#{data.text.substring 0, maxLength}...\"\n\n        data\n","pouch = require '../lib/db'\n\nBaseView = require '../lib/base_view'\n\n\nmodule.exports = class DailyNoteWidget extends BaseView\n    el: '#daily-note'\n    template: require './templates/daily_note_widget'\n\n\n    events:\n        'keyup textarea': 'saveNote'\n        'click .remove': 'deleteNote'\n\n\n    afterRender: ->\n        @textField = @$ 'textarea'\n        @dateField = @$ '.date-field'\n        @isSaving = false\n\n\n    # Save note to database after 3s.\n    saveNote: =>\n        unless @isSaving\n            @isSaving = true\n            setTimeout =>\n                @model.set 'date', @day\n                @model.set 'text', @textField.val()\n                pouch.notes.save @model.attributes, (err) =>\n                    console.log err if err\n                    @isSaving = false\n            , 3000\n\n\n    # Delete current note.\n    deleteNote: =>\n        pouch.notes.remove @model, =>\n            Backbone.history.navigate 'archives', trigger: true\n\n    # Resize text area (useful when window is resized).\n    resizeTextArea: ->\n        @textField?.height $(window).height() - 180\n\n\n    # Display current widget for given day.\n    # Reload text, if the widget is already visible.\n    show: (day) ->\n\n        unless @isSaving or @isTyping\n            @day = day\n            @_showEl()\n\n            @showLoading()\n            pouch.notes.get day, (err, model) =>\n                @hideLoading()\n\n                @model = model\n                @textField.val model.get 'text'\n                @dateField.html model.get 'date'\n\n                @_focusTextarea()\n\n\n    # Focus on given text area.\n    _focusTextarea: ->\n        @textField.focus()\n        len = @textField.val().length\n        @textField[0].setSelectionRange len, len\n\n\n    # Show element.\n    _showEl: ->\n        @resizeTextArea()\n        @$el.show()\n\n","pouch = require '../lib/db'\nViewCollection = require '../lib/view_collection'\nDailyNotesCollection = require '../collections/daily_notes'\nDailyNoteView = require './daily_note'\n\n# Represents the archive note list.\nmodule.exports = class DailyNotesView extends ViewCollection\n    el: '#daily-notes'\n    collectionEl: '#daily-notes'\n\n    collection: new DailyNotesCollection()\n    itemview: DailyNoteView\n\n    # Set events:\n    # * Render the whole list if the collections is reset.\n    # * Render one line if the an element is added.\n    afterRender: ->\n        @collection.on 'reset', @renderAll\n        @collection.on 'add', @renderOne\n\n        @showLoading()\n        @collection.fetch\n            success: =>\n                @hideLoading()\n            error: (err) =>\n                console.log err\n\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\nvar locals_ = (locals || {}),date = locals_.date,text = locals_.text;\nbuf.push(\"<!-- .daily_note --><a\" + (jade.attr(\"href\", \"#\" + (date) + \"\", true, false)) + \" class=\\\"action\\\"><span class=\\\"date\\\">\" + (jade.escape(null == (jade_interp = date) ? \"\" : jade_interp)) + \"</span><span class=\\\"text\\\">\" + (jade.escape(null == (jade_interp = text) ? \"\" : jade_interp)) + \"</span></a>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","h2.date= date\ntextarea#note-area\n","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<h2 class=\\\"date\\\"><span class=\\\"date-field\\\"></span><span class=\\\"layout-right\\\"><a class=\\\"remove\\\">remove</a></span><img src=\\\"spinner.svg\\\" loading=\\\"loading\\\" indicator=\\\"indicator\\\" class=\\\"spinner\\\"/></h2><textarea id=\\\"note-area\\\"></textarea>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}","var __templateData = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n\nbuf.push(\"<div id=\\\"content\\\"><div id=\\\"menu\\\"><h1><a href=\\\"#\\\">Hari</a></h1><a href=\\\"#archives\\\">archives</a><div></div></div><div id=\\\"daily-note\\\" class=\\\"widget\\\"></div><div id=\\\"archives\\\" class=\\\"widget\\\"><h2>Archives</h2><div id=\\\"daily-notes\\\"></div></div></div>\");;return buf.join(\"\");\n};\nif (typeof define === 'function' && define.amd) {\n  define([], function() {\n    return __templateData;\n  });\n} else if (typeof module === 'object' && module && module.exports) {\n  module.exports = __templateData;\n} else {\n  __templateData;\n}"]}