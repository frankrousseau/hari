// Generated by CoffeeScript 1.8.0
var americano, express, expressPouchDB, start;

americano = require('americano');

express = require('express');

expressPouchDB = require('express-pouchdb');

start = module.exports.start = function(options, callback) {
  if (options == null) {
    options = {};
  }
  if (options.name == null) {
    options.name = 'hari';
  }
  if (options.port == null) {
    options.port = process.env.PORT || 9673;
  }
  if (options.host == null) {
    options.host = "0.0.0.0";
  }
  if (options.root == null) {
    options.root = __dirname;
  }
  if (options.PouchDB == null) {
    options.PouchDB = require('pouchdb');
  }
  return americano.start(options, function(app, server) {
    var opts;
    opts = {};
    app.use('/cozy', expressPouchDB(options.PouchDB, opts));
    if (options.db == null) {
      options.db = new options.PouchDB('db');
    }
    return typeof callback === "function" ? callback(null, app, server) : void 0;
  });
};

if (!module.parent) {
  start();
}
